<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/css/styles.css">
        <title>회원가입</title>
    </head>
    <body>
        <header>
            <div class="header-top">
                <a href="login.html">로그인</a>
                <a href="register.html">회원가입</a>
            </div>
            <div class="header-main">
                <h1 class="header-title"><a href="index.html">CodeSnack</a></h1>
            </div>
        </header>

        <nav>
            <div class="nav-left">
                <a href="index.html">홈</a> | <a href="notice-board.html">공지사항</a> |
                <a href="free-board.html">자유 게시판</a> |
                <a href="market-board.html">장터 게시판</a> |
                <a href="suggestions-board.html">건의 게시판</a> |
                <a href="qna-board.html">QnA 게시판</a> |
                <a href="pointshop.html">포인트샵</a>
            </div>
            <div class="search-box">
                <input type="text" placeholder="검색어를 입력하세요">
                <button type="button">검색</button>
            </div>
    
        </nav>
    <section id="register-section">
        <h3>회원가입</h3>

        <form action="/html/register.html" method="post">
            <label for="username">이름:</label>
            <input type="text" id="username" name="username" required>
            
            <label for="id">아이디:</label>
            <input type="text" id="id" name="id" required>
            <button type="button" id="id_check_button">중복확인</button><br>

            <label for="password">비밀번호:</label>
            <input type="password" id="password" name="password" required>

            <label for="confirm-password">비밀번호 확인:</label>
            <input type="password" id="confirm-password" name="confirm-password" required>

            <label for="nickname">닉네임:</label>
            <input type="text" id="nickname" name="nickname" required>
            <button type="button" id="nickname_check_button">중복확인</button><br>

            <label for="miss">비밀번호 분실 시 질문 및 답변:</label>
            <select name="question">
                <option value="1">출생지는 어디인가요?</option>
                <option value="2">가장 친한 친구의 이름은 무엇인가요?</option>
                <option value="3">좋아하는 동물은 무엇인가요?</option>
            </select><br>
            <input type="text" id="miss" name="miss" required><br>

            <button type="submit" id="submit_button">회원가입</button>
        </form>

        <p>이미 계정이 있으신가요? <a href="login.html">로그인</a></p>
    </section>

    <footer>
        © 2024 CodeSnack. All rights reserved.
    </footer>
<script>
   
// 아이디 중복 확인 버튼 클릭 이벤트 핸들러
   document.getElementById('id_check_button').addEventListener('click', function() {
      const id = document.getElementById('id').value; // 아이디 입력 필드에서 아이디 가져오기
      // 서버에 아이디 중복 확인 요청 보내기
      
      const xhr = new XMLHttpRequest();  
      xhr.open('GET', '/checkduplicate1?id=' + encodeURIComponent(id));
       xhr.onload = function() {
        if (xhr.status === 200) {
          const response = JSON.parse(xhr.responseText);
          if (response.duplicate) {
            alert('아이디가 이미 존재합니다.');
          } else {
            
            alert('사용 가능한 아이디입니다.');
          }
        } else {
          alert('서버 에러 발생');
        }
      };
      xhr.send();
     });
     //닉네임 중복확인 버튼 
     document.getElementById('nickname_check_button').addEventListener('click', function() {
      const nickname = document.getElementById('nickname').value; // 닉네임 입력 필드에서 넥네임 가져오기
      // 서버에 닉네임 중복 확인 요청 보내기
      
      const xhr = new XMLHttpRequest();
      
      xhr.open('GET', '/checkduplicate2?nickname=' + encodeURIComponent(nickname));
     
      xhr.onload = function() {
        if (xhr.status === 200) {
          const response = JSON.parse(xhr.responseText);
          if (response.duplicate) {
            alert('닉네임이 이미 존재합니다.');
          } else {
            
            alert('사용 가능한 닉네임입니다.');
          }
        } else {
          alert('서버 에러 발생');
        }
      };
      xhr.send();
     });
     var password = document.getElementById("password");
var confirmPassword = document.getElementById("confirm-password");

confirmPassword.addEventListener("change", function() {
  if (password.value !== confirmPassword.value) {
    alert("비밀번호와 비밀번호 확인이 일치하지 않습니다.");
    confirmPassword.value = "";
  }
});
/*
//회원가입 버튼 
document.getElementById("submit_button").addEventListener("click", function(event) {
  event.preventDefault(); // 폼의 기본 제출 동작을 막음
  
  // 비밀번호와 비밀번호 확인 입력값 가져오기
  var password = document.getElementById("password").value;
  var confirmPassword = document.getElementById("confirm-password").value;

  // 비밀번호 일치 여부 체크
  if (password !== confirmPassword) {
    alert("비밀번호와 비밀번호 확인이 일치하지 않습니다.");
  } 
  else {
    // 비밀번호 일치 시 회원가입 진행
   
    document.getElementById("register-section").submit();
       
       
  }

}); */
    </script>
</body>
</html>
