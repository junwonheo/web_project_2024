<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/styles.css" />
    <title>QnA 게시판</title>
  </head>
  <body>
    <header>
      <% if (login) { %>
       
        <div class="header-top">
          <a><%= nickname %></a><button type="button" onclick="location.href='/logout'">로그아웃</button>
        </div>
      <% } else { %>
        
        <div class="header-top">
          <a href="login">로그인</a>
          <a href="register">회원가입</a>
        </div>
      <% } %>
      <div class="header-main">
        <h1 class="header-title"><a href="index">CodeSnack</a></h1>
      </div>
    </header>

    <nav>
      <!-- 검색 창 추가 -->
      <div class="search-box">
        <input type="text" placeholder="검색어를 입력하세요" />
        <button type="button">검색</button>
      </div>
      <div class="nav-left">
        <a href="index">홈</a> | <a href="notice-board">공지사항</a> |
        <a href="free-board">자유 게시판</a> |
        <a href="market-board">장터 게시판</a> |
        <a href="suggestions-board">건의 게시판</a> |
        <a href="qna-board">QnA 게시판</a> |
        <a href="pointshop">포인트샵</a>
      </div>
      <button
        class="write-post-btn"
        onclick="location.href='write-post-page'"
      >
        글 쓰기
      </button>
    </nav>

    <section>
      <!-- 자유 게시물만 표시 -->
      <% for (let i = 0; i <boards[0].length ; i++ ){ %>
        <a href="qna-text?no=<%= boards[0][i].postId %>">
          <article class="qna-post">
            <h2><%= boards[0][i].title %></h2>
            <p><%= boards[0][i].content %></p>
            
            <% 
            let date = new Date(boards[0][i].timeStamp);
            let year = date.getFullYear();
            let month = date.getMonth() + 1; // getMonth는 0부터 시작하므로 1을 더해줍니다.
            let day = date.getDate();
          %>
          <br><p class="date-text"><%= month %>-<%= day %></p>
          </article>
        </a>
      <% } %>
      <div class="pagination">
        <% for(let i = 1; i <= totalPages; i++) { %>
          <a href="/qna-board?page=<%= i %>"><%= i %><span>&nbsp;</span></a>
        <% } %>
      </div>
      <!-- 추가적인 자유 게시물들을 동적으로 표시하거나, 페이지를 넘기는 등의 기능을 구현할 수 있습니다. -->
    </section>

    <footer>© 2024 CodeSnack. All rights reserved.</footer>
  </body>
</html>
